(this["webpackJsonpevent-listing"]=this["webpackJsonpevent-listing"]||[]).push([[0],{23:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var c=n(0),i=n.n(c),a=n(14),s=n.n(a),o=n(12),r=(n(23),n(7)),l=n(2),u=(n(24),n(25),n(1));var j=function(t){var e=t.card,n=t.onClickLike,c=t.isFavorites,i=localStorage.getItem(e.id),a="card__like ".concat(i?"card__like_active":""),s="card__date ".concat(c?"card__date_favorite":"");return Object(u.jsxs)("li",{className:"card",children:[Object(u.jsx)("img",{src:e.image,className:"card__image",alt:e.genre}),Object(u.jsx)("h2",{className:"card__title",children:e.name}),Object(u.jsxs)("p",{className:s,children:[e.date.split(".")[0]," ",c?e.date.split(".")[1]:""]}),Object(u.jsx)("button",{type:"button",className:a,onClick:function(t){return n(e)}})]})};var h=function(t){var e=t.cards,n=t.onClickLike,c=t.isFavorites;return Object(u.jsx)("main",{className:"main",children:Object(u.jsx)("ul",{className:"main__places",children:e.map((function(t,e){return Object(u.jsx)(j,{card:t,onClickLike:n,isFavorites:c},t.id)}))})})},d=(n(27),n(28),n(29),n.p+"static/media/arc_nav.c381148f.svg"),v={"01":"January","02":"Fabruary","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"};function m(t){var e=t.data,n=t.onClickFunc,c=t.dataKey;return Object(u.jsx)("li",{className:"navigation__item navigation__item_sub",onClick:function(t){return n(c||e)},children:Object(u.jsx)("p",{className:"navigation__item-text",children:e})})}var b=function(t){var e=t.months,n=t.cites,c=t.city,i=t.month,a=t.onClickCity,s=t.onClickMonth;return Object(u.jsxs)("nav",{className:"navigation",children:[Object(u.jsxs)("div",{className:"navigation__section",children:[Object(u.jsx)("p",{className:"navigation__text",children:"City:"}),Object(u.jsxs)("div",{className:"navigation__container",children:[Object(u.jsxs)("ul",{className:"navigation__list",children:[Object(u.jsx)("li",{className:"navigation__item",onClick:function(t){return a(c)},children:Object(u.jsx)("p",{className:"navigation__item-text navigation__item-text_head",children:c})}),Object(u.jsx)("ul",{className:"navigation__submenu",children:Object.keys(n).map((function(t){return Object(u.jsx)(m,{data:n[t],onClickFunc:a})}))})]}),Object(u.jsx)("img",{src:d,className:"navigation__image",alt:"\u041d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u0435\u043b\u043a\u0430"})]})]}),Object(u.jsxs)("div",{className:"navigation__section",children:[Object(u.jsx)("p",{className:"navigation__text",children:"Month:"}),Object(u.jsxs)("div",{className:"navigation__container",children:[Object(u.jsxs)("ul",{className:"navigation__list",children:[Object(u.jsx)("li",{className:"navigation__item",onClick:function(t){return s(i)},children:Object(u.jsx)("p",{className:"navigation__item-text navigation__item-text_head",children:v[i]})}),Object(u.jsx)("ul",{className:"navigation__submenu",children:Object.keys(e).map((function(t){return Object(u.jsx)(m,{data:v[e[t]],onClickFunc:s,dataKey:e[t]})}))})]}),Object(u.jsx)("img",{src:d,className:"navigation__image",alt:"\u041d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u0435\u043b\u043a\u0430"})]})]})]})};var _=function(t){var e=t.months,n=t.cites,c=t.city,i=t.month,a=t.onClickCity,s=t.onClickMonth,o=t.favorites,r=t.onClickFavorites,l=t.isFavorites,j=t.onClickIndex;return Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("h1",{className:"header__title",onClick:function(t){return j()},children:"Event Listing"}),l?"":Object(u.jsx)(b,{months:e,cites:n,city:c,month:i,onClickCity:a,onClickMonth:s}),Object(u.jsx)("p",{className:"header__likes",onClick:function(t){return r()},children:o})]})},f=n(15),g=n(16),O=new(function(){function t(e){Object(f.a)(this,t),this._url=e.url}return Object(g.a)(t,[{key:"_checkResponse",value:function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status))}},{key:"getAllEvents",value:function(){return fetch(this._url).then(this._checkResponse)}}]),t}())({url:"https://raw.githubusercontent.com/xsolla/xsolla-frontend-school-2021/main/events.json"});function x(t,e){var n=[];t.forEach((function(t){var e=t.date.split(".")[1];n.includes(e)||n.push(e)})),n.sort();var c="";return e?(c=e,n.splice(n.indexOf(c),1)):c=n.shift(),[c,n]}function k(t,e){var n=[];t.forEach((function(t){var e=t.city;n.includes(e)||n.push(e)})),n.sort();var c="";return e?(c=e,n.splice(n.indexOf(c),1)):c=n.shift(),[c,n]}function p(t,e,n){return t.filter((function(t){return t.city===n&&t.date.split(".")[1]===e}))}function C(t){return t.filter((function(t){return localStorage.getItem(t.id)}))}var N=function(){var t=Object(c.useState)([]),e=Object(r.a)(t,2),n=e[0],i=e[1],a=Object(c.useState)([]),s=Object(r.a)(a,2),o=s[0],j=s[1],d=Object(c.useState)([]),v=Object(r.a)(d,2),m=v[0],b=v[1],f=Object(c.useState)(""),g=Object(r.a)(f,2),N=g[0],y=g[1],S=Object(c.useState)(""),F=Object(r.a)(S,2),E=F[0],A=F[1],I=Object(c.useState)("0"),M=Object(r.a)(I,2),L=M[0],J=M[1],w=Object(c.useState)(!1),P=Object(r.a)(w,2),B=P[0],D=P[1];return Object(c.useEffect)((function(){O.getAllEvents().then((function(t){var e=t[0].date.split(".")[1];return{cards:t,month:e,city:t[0].city}})).then((function(t){var e=t.cards,n=t.month,c=t.city;A(c),y(n),j(x(e,n)[1]),b(k(e,c)[1]);var a=p(e,n,c);i(a),J(localStorage.length)})).catch((function(t){return console.log(t)}))}),[]),Object(u.jsx)("div",{className:"app",children:Object(u.jsx)("div",{className:"app__container",children:Object(u.jsx)(l.c,{children:Object(u.jsxs)(l.a,{path:"/",children:[Object(u.jsx)(_,{months:o,cites:m,city:E,month:N,onClickMonth:function(t){O.getAllEvents().then((function(e){j(x(e,t)[1]);var n=p(e,t,E);i(n),y(t)})).catch((function(t){return console.log(t)}))},onClickCity:function(t){O.getAllEvents().then((function(e){b(k(e,t)[1]);var n=p(e,N,t);i(n),A(t)})).catch((function(t){return console.log(t)}))},favorites:L,onClickFavorites:function(){D(!0),O.getAllEvents().then((function(t){var e=C(t);i(e)})).catch((function(t){return console.log(t)}))},isFavorites:B,onClickIndex:function(){D(!1),O.getAllEvents().then((function(t){var e=p(t,N,E);i(e)}))}}),Object(u.jsx)(h,{cards:n,onClickLike:function(t){localStorage.getItem(t.id)?localStorage.removeItem(t.id):localStorage.setItem(t.id,"like"),O.getAllEvents().then((function(t){j(x(t,N)[1]);var e=[];e=B?C(t):p(t,N,E),i(e),y(N),J(localStorage.length)})).catch((function(t){return console.log(t)}))},isFavorites:B})]})})})})},y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),c(t),i(t),a(t),s(t)}))};s.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(o.a,{children:Object(u.jsx)(N,{})})}),document.getElementById("root")),y()}},[[38,1,2]]]);
//# sourceMappingURL=main.d79f2c2c.chunk.js.map